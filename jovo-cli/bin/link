#!/usr/bin/env node
const { join } = require('path');
const globalPrefix = require('global-prefix');
const symlinkDir = require('symlink-dir');
const { platform } = require('os');
const { copyFileSync } = require('fs');

(async () => {
  if (platform() === 'win32') {
    await symlinkDir('.', join(globalPrefix, 'jovodev'));
    copyFileSync('bin/jovodev', join(globalPrefix, 'jovodev'));
    copyFileSync('bin/jovodev.ps1', join(globalPrefix, 'jovodev.ps1'));
    copyFileSync('bin/jovodev.cmd', join(globalPrefix, 'jovodev.cmd'));
  } else {
    await symlinkDir(join('./', 'bin', 'run'), join(globalPrefix, 'bin', 'jovodev'));
  }
})();
